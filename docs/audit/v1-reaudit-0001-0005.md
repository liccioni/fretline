# Re-Audit v1 — Tasks 0001–0005

Date: 2026-01-31

## Executive Summary — FAIL
- Core Session List, Builder, Runner, and localStorage persistence exist, but several spec-required drill type features are missing.
- Builder/Drill Editor only support Generic drills; spec requires all drill types and type-specific fields.
- Invalid drills can be added (even if blocked from Run/Save), which conflicts with the spec rule.
- Runner behavior (explicit start, countdown, auto-advance, metronome) appears aligned.

## Spec Checklist (MUSTs / MUST-NOTs)
- MUST-NOT (Non-Goals): no accounts/auth, no cloud sync, no social, no AI plans, no gamification, no recording/audio analysis, no MIDI/pitch detection, no mobile app.
- MUST: Session List screen (view/create/edit/delete).
- MUST: Session Builder (add drills, select drill type, set name/duration/BPM, reorder/remove, session duration sum, invalid drills cannot be added).
- MUST: Drill Editor (fields change by drill type, defaults applied, inline blocking validation).
- MUST: Session Runner (distraction-free, no interaction after start, auto-advance, displays name/remaining/BPM/beat/progress, metronome with accented downbeat).
- MUST: Runtime rules (explicit start, 3s countdown, automatic transitions, no mid-session interruption, runner must not crash mid-session).
- MUST: Persistence (localStorage only; no backend).
- MUST: Drill types and required fields (Generic, Note Location, Triad Location, Spider) supported.

## Tasks 0001–0005 Claimed Deliverables
- Task 0001: Folder structure + domain types for Session and all Drill types.
- Task 0002: Runner + metronome + minimal runner UI.
- Task 0003: In-memory Builder for Generic drills only with validation.
- Task 0004: Builder → Runner flow, no mid-session interruption.
- Task 0005: Session List + localStorage persistence (Option B: full Drill union storage).

## Findings
| ID | Severity | Spec Reference | Evidence (file:line) | Notes / Recommendation |
| --- | --- | --- | --- | --- |
| F-001 | Major | Screens → Session Builder; Drill Editor; Definition of Done (all drill types supported) | `src/screens/SessionBuilder.tsx:2-3,23,90-101,185-202` ; `src/components/DrillEditor.tsx:1,10-13,37-114` | Builder/Editor only handle `GenericDrill` and provide no drill-type selection or type-specific fields. Implement drill type selection and fields for Note Location, Triad, Spider. |
| F-002 | Major | Screens → Session Builder (invalid drills cannot be added) | `src/screens/SessionBuilder.tsx:90-101,185-202` | Add Drill creates invalid drills (empty name, potentially invalid fields) and allows them in the list; validation only blocks Run/Save. Block add or require valid inputs before adding to meet “invalid drills cannot be added.” |
| F-003 | Major | Persistence; Definition of Done (all drill types supported); Task 0005 Option B | `src/screens/SessionBuilder.tsx:27-31` | Editing a session casts `drills` to `GenericDrill[]`, risking loss of non-generic fields and violating round-trip union persistence. Preserve full drill union on load/edit or prevent editing non-generic drills without data loss. |
| F-004 | Minor | Session Runner (fullscreen/distraction-free) | `src/screens/SessionRunner.tsx:104-155` | Runner UI is minimal but not fullscreen/distraction-free. Consider a basic fullscreen layout or at least a distraction-free container. |

## No Drift Found
Not applicable — findings above.
